{"version":3,"sources":["ChordButtons.module.scss","AudioFontPlayer.ts","chords.ts","ChordButtons.tsx","ChordView.tsx","useDebounce.ts","Sliders.tsx","App.tsx","reportWebVitals.ts","index.tsx","ChordView.module.scss","Sliders.module.scss","App.module.scss"],"names":["module","exports","soundFont","window","_tone_0411_FluidR3_GM_sf2_file","AudioFontPlayer","constructor","player","audioContext","envelopes","volume","playbackRate","AudioContextFunc","AudioContext","webkitAudioContext","this","WebAudioFontPlayer","loader","decodeAfterLoading","console","log","queueNote","note","duration","zone","findZone","baseDetune","originalPitch","coarseTune","fineTune","Math","pow","envelope","queueWaveTable","destination","audioBufferSourceNode","cancelScheduledValues","setValueAtTime","push","playChord","pitches","stop","forEach","pitch","pop","cancel","length","setFreq","freq","map","e","setVolume","NOTES","NOTES_CHROMATIC_ORDER","NOTES_FIFTHS_ORDER","CHORDTYPES","TUNING","CHORD_DB","createNotesArr","notes","arr","n","sort","a","b","threeNoteChordItem","base","type","fourNoteChordItem","fourth","i","createDb","getChords","p","filter","item","isEqual","r","getDifficulty","reduce","prev","curr","VALID_CHORDS","positionsToPitches","positions","t","getAlternativeNames","c","j","k","chord","Array","isArray","init","CHROMATIC_KEYMAP","CHROMATIC_KEYMAP_CODES","FIFTHS_KEYMAP","FIFTHS_KEYMAP_CODES","ChordButtons","props","activeNote","activeType","pendingType","onClick","onStop","layout","setLayout","useState","keymap","className","styles","chordbuttons","key","_","typeIndex","order","isButtonActive","noteIndex","pending","active","renderButtons","colSpan","name","value","checked","onChange","target","ChordView","isChecked","getNote","baseNote","pos","index","wrapper","chordview","readOnly","fill","names","Fragment","useDebounce","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","Sliders","onSetVolume","onSetTuning","debouncedVolume","tuning","setTuning","debouncedTuning","sliders","tuner","step","min","max","Number","App","useRef","ready","setReady","current","lastChordNote","setLastChordNote","lastChordType","setLastChordType","pendingChordType","setPendingChordType","render","getStorageKey","storageKey","getPitches","useCallback","stored","localStorage","getItem","parsed","JSON","parse","every","isInteger","err","getChordPitches","indexOf","onChordClick","setItem","stringify","Date","now","onKeyDown","keyCode","includes","typeKeymap","listener","ctrlKey","shiftKey","altKey","code","preventDefault","stopPropagation","document","addEventListener","removeEventListener","app","chords","renderChord","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ae4acd31.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chordbuttons\":\"ChordButtons_chordbuttons__1fCK-\",\"pending\":\"ChordButtons_pending__2QeOF\",\"active\":\"ChordButtons_active__1aWxQ\",\"stop\":\"ChordButtons_stop__3dkpU\"};","import WebAudioFontPlayer from 'webaudiofont';\n\nconst soundFont = (window as any)._tone_0411_FluidR3_GM_sf2_file\n\nexport class AudioFontPlayer {\n  private player;\n  private audioContext;\n  private envelopes = [];\n  private volume = 0.5;\n  private playbackRate = 1.0;\n\n  constructor () {\n    const AudioContextFunc = window.AudioContext || (window as any).webkitAudioContext;\n    this.audioContext = new AudioContextFunc();\n    this.player = new WebAudioFontPlayer();\n    this.player.loader.decodeAfterLoading(this.audioContext, '_tone_0411_FluidR3_GM_sf2_file');\n    // sustain\n    // for (let i = 0; i < soundFont.zones.length; i++){\n    //   soundFont.zones[i].ahdsr = false;\n    // }\n    console.log(this.player, soundFont);\n  }\n\n  queueNote(note: number, duration: number) {\n    const zone = this.player.findZone(this.audioContext, soundFont, note);\n    const baseDetune = zone.originalPitch - 100.0 * zone.coarseTune - zone.fineTune;\n\t\tconst playbackRate = this.playbackRate * Math.pow(2, (100.0 * note - baseDetune) / 1200.0);\n    const envelope = this.player.queueWaveTable(this.audioContext, this.audioContext.destination, soundFont, 0, note, duration, this.volume);\n    console.log('i', note, playbackRate);\n    envelope.audioBufferSourceNode.playbackRate.cancelScheduledValues(0);\n    envelope.audioBufferSourceNode.playbackRate.setValueAtTime(playbackRate, 0);\n    this.envelopes.push(envelope);\n  }\n\n  playChord(pitches: number[]) {\n    this.stop();\n    pitches.forEach(pitch => this.queueNote(pitch, 999));\n  }\n\n  stop() {\n    while (true) {\n      const envelope = this.envelopes.pop();\n      if (!envelope) break;\n      envelope.cancel();\n    }\n  }\n\n  get playing() {\n    return this.envelopes.length > 0;\n  }\n\n  setFreq(freq: number) {\n    this.playbackRate = freq / 440;\n    const pitches = this.envelopes.map(e => e.pitch);\n    this.playChord(pitches);\n  }\n\n  setVolume(volume: number) {\n    this.volume = volume;\n    // it doesn't accept 0\n    if (this.volume === 0) {\n      this.volume = 0.0001;\n    }\n    const pitches = this.envelopes.map(e => e.pitch);\n    this.playChord(pitches);\n  }\n}\n","import { isEqual } from 'lodash';\n\nexport const NOTES = ['C', 'C♯', 'D', 'E♭', 'E', 'F', 'F♯', 'G', 'A♭', 'A', 'B', 'H'];\nexport const NOTES_CHROMATIC_ORDER = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\nexport const NOTES_FIFTHS_ORDER = [6, 1, 8, 3, 10, 5, 0, 7, 2, 9, 4, 11];\nexport const CHORDTYPES = ['', 'm', '7', 'dim', '5', '6', 'm7', 'maj7', 'sus2', 'sus4', 'm6', 'aug'];\n\nconst TUNING = [55, 62, 57];\nconst MAX_POS = 8;\n\nconst CHORD_DB = [];\n\nconst createNotesArr = (notes: number[]) => {\n  const arr = notes.map(n => n % 12);\n  arr.sort((a, b) => a - b);\n  return arr;\n};\n\nconst threeNoteChordItem = (base: number, type: number, notes: number[]) => {\n  return { base, type, notes: createNotesArr(notes) };\n}\n\nconst fourNoteChordItem = (base: number, type: number, notes: number[], fourth: number) => {\n  return [\n    threeNoteChordItem(base, type, [notes[0], notes[1], fourth]),\n    threeNoteChordItem(base, type, [notes[0], fourth, notes[2]]),\n    threeNoteChordItem(base, type, [fourth, notes[1], notes[2]]),\n  ];\n}\n\nconst createDb = () => {\n  for (let i = 0; i < 12; i++) {\n    CHORD_DB.push(\n      threeNoteChordItem(i, 0, [i, i + 4, i + 4 + 3]), // major\n      threeNoteChordItem(i, 1, [i, i + 3, i + 3 + 4]), // minor\n      ...fourNoteChordItem(i, 2, [i, i + 4, i + 4 + 3], i + 4 + 3 + 3), // 7\n      threeNoteChordItem(i, 3, [i, i + 3, i + 6]), // dim\n      threeNoteChordItem(i, 4, [i, i, i + 3 + 4]), // 5\n      threeNoteChordItem(i, 4, [i, i + 3 + 4, i + 3 + 4]), // 5\n      ...fourNoteChordItem(i, 5, [i, i + 4, i + 4 + 3], i + 4 + 3 + 2), // 6\n      ...fourNoteChordItem(i, 6, [i, i + 3, i + 3 + 4], i + 4 + 3 + 3), // m7\n      ...fourNoteChordItem(i, 7, [i, i + 4, i + 4 + 3], i + 4 + 3 + 4), // maj7\n      threeNoteChordItem(i, 8, [i, i + 2, i + 4 + 3]), // sus2\n      threeNoteChordItem(i, 9, [i, i + 5, i + 4 + 3]), // sus4\n      ...fourNoteChordItem(i, 10, [i, i + 3, i + 3 + 4], i + 4 + 3 + 2), // m6\n      threeNoteChordItem(i, 11, [i, i + 4, i + 4 + 4]), // aug\n    );\n  }\n};\ncreateDb();\nconsole.log(CHORD_DB);\n\n// note is zero indexed\nconst pitchToNote = (pitch: number) => {\n  return pitch % 12;\n}\n\nconst getChords = (pitches: number[]) => {\n  const notes = pitches.map(p => pitchToNote(p)).sort((a, b) => a - b);\n  const res = CHORD_DB.filter(item => isEqual(item.notes, notes));\n  return res.map(r => ({ base: r.base, type: r.type }));\n};\n\nconst getDifficulty = (pitches: number[]) => {\n  const positions = pitches.map((pitch, i) => pitch - TUNING[i]);\n  const score = positions.reduce((prev, curr) => curr === 0 ? prev + 2 : prev + curr, 0);\n  return score;\n};\n\n// VALID_CHORDS[note][type] = [pitches];\nconst VALID_CHORDS = [];\n\nfunction init() {\n  for (let i = 0; i < MAX_POS; i++) {\n    for (let j = 0; j < MAX_POS; j++) {\n      for (let k = 0; k < MAX_POS; k++) {\n        const pitches = [TUNING[0] + i, TUNING[1] + j, TUNING[2] + k];\n        const chords = getChords(pitches);\n        chords.forEach(chord => {\n          if (!Array.isArray(VALID_CHORDS[chord.base])) {\n            VALID_CHORDS[chord.base] = [];\n          }\n          if (!Array.isArray(VALID_CHORDS[chord.base][chord.type])) {\n            VALID_CHORDS[chord.base][chord.type] = [];\n          }\n          VALID_CHORDS[chord.base][chord.type].push(pitches);\n        });\n      }\n    }\n  }\n\n  // order by complexity\n  for (let i = 0; i < VALID_CHORDS.length; i++) {\n    for (let j = 0; j < VALID_CHORDS[i].length; j++) {\n      const pitches = VALID_CHORDS[i][j];\n      pitches.sort((a, b) => getDifficulty(a) - getDifficulty(b));\n    }\n  }\n}\n\ninit();\n\nexport function getChordPitches(note: number, type: number) {\n  return VALID_CHORDS[note][type];\n}\n\nexport function getChordPositions(note: number, type: number) {\n  return VALID_CHORDS[note][type].map(pitches => pitches.map((pitch, i) => pitch - TUNING[i]));\n}\n\nexport function positionsToPitches(positions: number[]) {\n  return TUNING.map((t, i) => positions[i] + t);\n}\n\nexport function getAlternativeNames(positions: number[]) {\n  const pitches = positions.map((p, i) => TUNING[i] + p);\n  const chords = getChords(pitches).sort((a, b) => a.type - b.type);\n  return chords.map(c => `${NOTES[c.base]}${CHORDTYPES[c.type]}`);\n}\n\nconsole.log('VALID_CHORDS', VALID_CHORDS);\n","import React, { useState } from 'react';\nimport { CHORDTYPES, NOTES, NOTES_CHROMATIC_ORDER, NOTES_FIFTHS_ORDER } from './chords';\nimport styles from './ChordButtons.module.scss';\n\ninterface ChordButtonsProps {\n  activeNote: number;\n  activeType: number;\n  pendingType: number;\n  onClick: (note: number, type: number) => void;\n  onStop: () => void;\n}\n\nexport const CHROMATIC_KEYMAP = ['z', 's', 'x', 'd', 'c', 'v', 'g', 'b', 'h', 'n', 'j', 'm'];\nexport const CHROMATIC_KEYMAP_CODES = ['KeyZ', 'KeyS', 'KeyX', 'KeyD', 'KeyC', 'KeyV', 'KeyG', 'KeyB', 'KeyH', 'KeyN', 'KeyJ', 'KeyM'];\nexport const FIFTHS_KEYMAP = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '[', ']'];\nexport const FIFTHS_KEYMAP_CODES = ['KeyQ', 'KeyW', 'KeyE', 'KeyR', 'KeyT', 'KeyY', 'KeyU', 'KeyI', 'KeyO', 'KeyP', 'BracketLeft', 'BracketRight'];\n\nexport const ChordButtons: React.FC<ChordButtonsProps> = (props) => {\n  const { activeNote, activeType, pendingType, onClick, onStop } = props;\n  const [layout, setLayout] = useState('chromatic');\n\n  const renderButtons = (typeIndex: number) => {\n    const order = layout === 'chromatic' ? NOTES_CHROMATIC_ORDER : NOTES_FIFTHS_ORDER;\n    const isButtonActive = (noteIndex: number) => activeType === typeIndex && activeNote === noteIndex;\n\n    return (\n      <tr className={pendingType === typeIndex ? styles.pending : ''} key={typeIndex}>\n        <td>{typeIndex < 9 ? typeIndex + 1 : ''}</td>\n        {order.map((noteIndex) => (\n          <td key={noteIndex + typeIndex}>\n            <button\n              className={isButtonActive(noteIndex) ? styles.active : ''}\n              onClick={() => onClick(noteIndex, typeIndex)}\n            >\n              {NOTES[noteIndex]}{CHORDTYPES[typeIndex]}\n            </button>\n          </td>\n        ))}\n      </tr>\n    );\n  }\n\n  const keymap = layout === 'chromatic' ? CHROMATIC_KEYMAP : FIFTHS_KEYMAP;\n  return (\n    <div className={styles.chordbuttons}>\n      <table>\n        <thead>\n          <tr>\n            <td><strong>Key</strong></td>\n            {keymap.map(key => <td key={key}>{key}</td>)}\n          </tr>\n        </thead>\n        <tbody>\n          {CHORDTYPES.map((_, typeIndex) => renderButtons(typeIndex))}\n          <tr>\n            <td>Space</td>\n            <td colSpan={12}>\n              <button className={styles.stop} onClick={onStop}>Stop</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <label>\n        <input\n          type=\"radio\"\n          name=\"layout\"\n          value=\"chromatic\"\n          checked={layout === 'chromatic'}\n          onChange={(e) => setLayout(e.target.value)}\n        />\n        Chromatic\n      </label>\n      &nbsp;&nbsp;&nbsp;&nbsp;\n      <label>\n        <input\n          type=\"radio\"\n          name=\"layout\"\n          value=\"fifths\"\n          checked={layout === 'fifths'}\n          onChange={(e) => setLayout(e.target.value)}\n        />\n        Circle of fifths\n      </label>\n    </div>\n  );\n};\n","import React from 'react';\nimport { getAlternativeNames, NOTES } from './chords';\nimport styles from './ChordView.module.scss';\n\ninterface ChordViewProps {\n  isChecked: boolean;\n  positions: [number, number, number];\n  onClick: (positions: number[]) => void;\n}\n\nexport const ChordView: React.FC<ChordViewProps> = (props) => {\n  const { isChecked, positions, onClick } = props;\n\n  const getNote = (baseNote: number, pos: number) => {\n    const index = (baseNote + pos) % 12;\n    const isHighNote = baseNote + pos >= 7 + 12;\n    return isHighNote ? `${NOTES[index]}'` : NOTES[index];\n  }\n\n  return (\n    <div className={styles.wrapper} onClick={() => onClick(positions)}>\n      <table className={styles.chordview}>\n        <thead>\n          <tr>\n            <th colSpan={3}>\n              <input type=\"checkbox\" checked={isChecked} readOnly/>\n            </th>\n          </tr>\n          <tr>\n            <th>{getNote(7, positions[0])}</th>\n            <th>{getNote(14, positions[1])}</th>\n            <th>{getNote(9, positions[2])}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {new Array(7).fill(0).map((_, i) => (\n            <tr key={i}>\n              <td>{positions[0] === i + 1 ? '●' : ''}</td>\n              <td>{positions[1] === i + 1 ? '●' : ''}</td>\n              <td>{positions[2] === i + 1 ? '●' : ''}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <div className={styles.names}>\n        {getAlternativeNames(positions).map(name =>\n          <React.Fragment key={name}>\n            {name}\n            <br />\n          </React.Fragment>\n        )}\n      </div>\n    </div>\n  )\n};\n","import { useEffect, useState } from \"react\";\n\nexport function useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n","import React, { useEffect, useState } from 'react';\nimport styles from './Sliders.module.scss';\nimport { useDebounce } from './useDebounce';\n\ninterface SlidersProps {\n  onSetVolume: (volume: number) => void;\n  onSetTuning: (tuning: number) => void;\n}\n\nexport const Sliders: React.FC<SlidersProps> = (props) => {\n  const { onSetVolume, onSetTuning } = props;\n  const [volume, setVolume] = useState(0.5);\n  const debouncedVolume = useDebounce(volume, 50);\n  const [tuning, setTuning] = useState(440);\n  const debouncedTuning = useDebounce(tuning, 25);\n\n  useEffect(() => {\n    onSetVolume(debouncedVolume);\n  }, [onSetVolume, debouncedVolume]);\n\n  useEffect(() => {\n    onSetTuning(debouncedTuning);\n  }, [onSetTuning, debouncedTuning]);\n\n  return (\n    <div className={styles.sliders}>\n      <label>\n        Tuning\n        <br />\n        <input\n          className={styles.tuner}\n          type=\"range\"\n          step=\"0.1\"\n          min=\"400\"\n          max=\"500\"\n          value={tuning}\n          onChange={(e) => setTuning(Number(e.target.value))}\n        />\n      </label>\n      <label>\n        Volume\n        <br />\n        <input\n          className={styles.tuner}\n          type=\"range\"\n          step=\"0.02\"\n          min=\"0\"\n          max=\"1\"\n          value={volume}\n          onChange={(e) => setVolume(Number(e.target.value))}\n        />\n      </label>\n      {/* <br />\n      {tuning.toFixed(1)}\n      <br /> */}\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport styles from './App.module.scss';\nimport { AudioFontPlayer } from './AudioFontPlayer';\nimport { ChordButtons, CHROMATIC_KEYMAP_CODES, FIFTHS_KEYMAP_CODES } from './ChordButtons';\nimport { CHORDTYPES, getChordPitches, getChordPositions, NOTES, NOTES_FIFTHS_ORDER, positionsToPitches } from './chords';\nimport { ChordView } from './ChordView';\nimport { Sliders } from './Sliders';\n\nexport const App: React.FC = () => {\n  const player = useRef(null);\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    player.current = new AudioFontPlayer();\n    setReady(true);\n  }, []);\n\n  const [lastChordNote, setLastChordNote] = useState(0);\n  const [lastChordType, setLastChordType] = useState(0);\n  const [pendingChordType, setPendingChordType] = useState<number>(null);\n  const [, render] = useState(0);\n\n  const getStorageKey = (note: string, type: string) => `viola-${note}${type}`;\n  const storageKey = getStorageKey(NOTES[lastChordNote], CHORDTYPES[lastChordType]);\n\n  const getPitches = useCallback((note: string, type: string) => {\n    const storageKey = getStorageKey(note, type);\n    const stored = localStorage.getItem(storageKey);\n    if (stored) {\n      try {\n        const parsed = JSON.parse(stored);\n        if (Array.isArray(parsed) && parsed.length === 3 && parsed.every(p => Number.isInteger(p))) {\n          console.log(parsed, positionsToPitches(parsed));\n          return positionsToPitches(parsed);\n        }\n      } catch (err) {}\n    }\n\n    return getChordPitches(\n      NOTES.indexOf(note),\n      CHORDTYPES.indexOf(type)\n    )[0];\n  }, []);\n\n  const playChord = useCallback((note: number, type: number) => {\n    const pitches = getPitches(NOTES[note], CHORDTYPES[type]);\n\n    setLastChordNote(note);\n    setLastChordType(type);\n    setPendingChordType(null);\n\n    player.current.playChord(pitches);\n  }, [getPitches])\n\n  const positions = getChordPositions(lastChordNote, lastChordType) ?? [];\n\n  const onChordClick = (positions: number[]) => {\n    const pitches = positionsToPitches(positions);\n    player.current.playChord(pitches);\n    localStorage.setItem(storageKey, JSON.stringify(positions));\n    render(Date.now()); // needed for the checkbox above chord icons\n  };\n\n  const onStop = () => {\n    player.current.stop();\n  };\n\n  const onKeyDown = useCallback((key: string, keyCode: string) => {\n    console.log(key, keyCode);\n    if (CHROMATIC_KEYMAP_CODES.includes(keyCode)) {\n      console.log('pending', pendingChordType);\n      playChord(CHROMATIC_KEYMAP_CODES.indexOf(keyCode) % 12, pendingChordType ?? lastChordType);\n      setPendingChordType(null);\n      return true;\n    }\n\n    if (FIFTHS_KEYMAP_CODES.includes(keyCode)) {\n      playChord(NOTES_FIFTHS_ORDER[FIFTHS_KEYMAP_CODES.indexOf(keyCode) % 12], pendingChordType ?? lastChordType);\n      setPendingChordType(null);\n      return true;\n    }\n\n    const typeKeymap = ['1', '2', '3', '4', '5', '6', '7', '8', '9'];\n    if (typeKeymap.includes(key)) {\n      setPendingChordType(typeKeymap.indexOf(key));\n      return true;\n    }\n\n    if (key === ' ') {\n      onStop();\n      return true;\n    }\n\n    return false;\n  }, [pendingChordType, lastChordType, playChord]);\n\n  useEffect(() => {\n    const listener = (e) => {\n      if (e.ctrlKey || e.shiftKey || e.altKey) return;\n      const res = onKeyDown(e.key, e.code);\n      if (res) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n    document.addEventListener(\"keydown\", listener);\n    return () => document.removeEventListener(\"keydown\", listener);\n  }, [onKeyDown]);\n\n  const renderChord = (pos: [number, number, number]) => {\n    const key = JSON.stringify(pos);\n    const isChecked = key === localStorage.getItem(storageKey);\n\n    return (\n      <ChordView\n        key={key}\n        positions={pos}\n        onClick={onChordClick}\n        isChecked={isChecked}\n      />\n    );\n  };\n\n  const onSetTuning = useCallback((freq: number) => {\n    player.current.setFreq(freq);\n  }, []);\n\n  const onSetVolume = useCallback((volume: number) => {\n    player.current.setVolume(volume);\n  }, []);\n\n  if (!ready) {\n    return null;\n  }\n\n  return (\n    <div className={styles.app}>\n      <ChordButtons\n        activeNote={lastChordNote}\n        activeType={lastChordType}\n        pendingType={pendingChordType}\n        onClick={playChord}\n        onStop={onStop}\n      />\n\n      <Sliders\n        onSetTuning={onSetTuning}\n        onSetVolume={onSetVolume}\n      />\n      \n      <div className={styles.chords}>\n        {positions.map(pos => renderChord(pos))}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chordview\":\"ChordView_chordview__1UQS7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sliders\":\"Sliders_sliders__lzxZi\",\"tuner\":\"Sliders_tuner__vf4HX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2ziFi\",\"chords\":\"App_chords__7aOCV\"};"],"sourceRoot":""}